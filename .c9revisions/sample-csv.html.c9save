{"ts":1359531670653,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"utf-8\">\n        <title>CSV PDB Viewer Example</title>\n        <script src=\"d3.v3.min.js\"></script>\n        <script>\n            d3.text(\"sample.csv\", function(datasetText) {\n                // get the csv as a Javascript array\n                var parsedCSV = d3.csv.parse(datasetText).map(function(d){ \n                    return { \n                        x:parseFloat(d.x),\n                        y:parseFloat(d.y),\n                        z:parseFloat(d.z),\n                        temperatureFactor: parseFloat(d.temperatureFactor)\n                    }\n                });\n                \n                // sort on the z prop\n                var sortProp = function(d){ return d.z; };\n                parsedCSV.sort(function(a,b){ \n                    return sortProp(a) < sortProp(b) ? -1 : (sortProp(a) > sortProp(b) ? 1 : 0);\n                });\n                \n                var mapX = function(d){ return d.x; },\n                    mapY = function(d){ return d.y; },\n                    mapZ = function(d){ return d.z; },\n                    mapT = function(d){ return d.temperatureFactor; };\n                var minX = d3.min(parsedCSV, mapX),\n                    maxX = d3.max(parsedCSV, mapX),\n                    minY = d3.min(parsedCSV, mapY),\n                    maxY = d3.max(parsedCSV, mapY),\n                    minZ = d3.min(parsedCSV, mapZ),\n                    maxZ = d3.max(parsedCSV, mapZ),\n                    minT = d3.min(parsedCSV, mapT),\n                    maxT = d3.max(parsedCSV, mapT);\n                \n                // get a scaled value within the range\n                var scale = function(val,min,max,scale){\n                    var range = parseFloat(max) - parseFloat(min);\n                    return ((parseFloat(val)-parseFloat(min))/range) * scale;\n                }\n                \n                var svg = d3.select(\"body\")\n                    .append(\"svg\")\n                    .attr(\"width\", 960)\n                    .attr(\"height\", 960)\n                    .append(\"g\");\n                svg\n                    .selectAll(\"circle\")\n                    .data(parsedCSV)\n                    .enter()\n                    .append(\"circle\")\n                    .attr(\"cx\", function(d){ return scale(d.x,minX,maxX, 930) + 10; })\n                    .attr(\"cy\", function(d){ return scale(d.y,minY,maxY, 930) + 10; })\n                    .attr(\"r\", function(d){ return scale(d.z,minZ,maxZ, 20) + 10; })\n                    .attr(\"fill\", function(d){return \"hsl(\"+ Math.round(scale(d.temperatureFactor,minT,maxT, 100)) + \",100%,50%)\";});\n            });\n        </script>\n    </head>\n    <body>\n    </body>\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2720}]],"length":2720}
